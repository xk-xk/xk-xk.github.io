<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>设计模式 | 前端笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="前端笔记">
    
    <link rel="preload" href="/assets/css/0.styles.869ac584.css" as="style"><link rel="preload" href="/assets/js/app.c7883db4.js" as="script"><link rel="preload" href="/assets/js/2.6de0ece2.js" as="script"><link rel="preload" href="/assets/js/10.4c7ec131.js" as="script"><link rel="prefetch" href="/assets/js/11.bb401b52.js"><link rel="prefetch" href="/assets/js/12.89f5787c.js"><link rel="prefetch" href="/assets/js/13.4f14e8b4.js"><link rel="prefetch" href="/assets/js/14.6f762aa4.js"><link rel="prefetch" href="/assets/js/15.b2d336b1.js"><link rel="prefetch" href="/assets/js/16.7b6ffe26.js"><link rel="prefetch" href="/assets/js/17.25a76365.js"><link rel="prefetch" href="/assets/js/18.ce568443.js"><link rel="prefetch" href="/assets/js/19.381acccf.js"><link rel="prefetch" href="/assets/js/20.bc5642c8.js"><link rel="prefetch" href="/assets/js/21.2c45007a.js"><link rel="prefetch" href="/assets/js/22.21b94e44.js"><link rel="prefetch" href="/assets/js/3.2edd2080.js"><link rel="prefetch" href="/assets/js/4.c46daee1.js"><link rel="prefetch" href="/assets/js/5.1484f066.js"><link rel="prefetch" href="/assets/js/6.7faf298f.js"><link rel="prefetch" href="/assets/js/7.aaf42974.js"><link rel="prefetch" href="/assets/js/8.77b2fe6e.js"><link rel="prefetch" href="/assets/js/9.824c7080.js">
    <link rel="stylesheet" href="/assets/css/0.styles.869ac584.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/program-specs/" class="nav-link">
  代码规范
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/design/" class="nav-link router-link-active">
  设计思想
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/program-specs/" class="nav-link">
  代码规范
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/design/" class="nav-link router-link-active">
  设计思想
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/design/" aria-current="page" class="sidebar-link">概述</a></li><li><a href="/design/design.html" aria-current="page" class="active sidebar-link">设计模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/design.html#外观模式" class="sidebar-link">外观模式</a></li><li class="sidebar-sub-header"><a href="/design/design.html#工厂模式" class="sidebar-link">工厂模式</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="设计模式"><a href="#设计模式" class="header-anchor">#</a> 设计模式</h1> <h2 id="外观模式"><a href="#外观模式" class="header-anchor">#</a> 外观模式</h2> <p>外观模式(Facade Pattern)：外部与一个子系统的通信必须通过一个统一的外观对象进行，而不直接与子系统打交道，外观模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。</p> <blockquote><p>外观模式在组件化开发中很常用，对代码进行解耦，只是我们平时可能并不知道自己用的是外观模式。</p></blockquote> <p>以一个 <code>TodoList</code>组件为例：</p> <p><code>TodoList</code> 组件中包含 <code>Input</code> 和 <code>List</code> 两个子组件，外部系统想要和这两个子组件进行通信时，通过一个中间人，也就是外观对象 <code>TodoList/index.ts</code>来进行交互。</p> <p>外部系统：<code>app.ts</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> TodoList <span class="token keyword">from</span> <span class="token string">&quot;./components/TodoList&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ITodoData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./typings&quot;</span>
<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> oApp<span class="token operator">:</span> HTMLElement <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> todoData<span class="token operator">:</span> ITodoData<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">const</span> init <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> todoList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TodoList</span><span class="token punctuation">(</span>oApp<span class="token punctuation">,</span> todoData<span class="token punctuation">)</span>
    todoList<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span>

</code></pre></div><p>外观对象：<code>TodoList/index.js</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ITodoData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../../typings&quot;</span>
<span class="token keyword">import</span> Input<span class="token punctuation">,</span> <span class="token punctuation">{</span> IInputOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./Subs/Input&quot;</span>
<span class="token keyword">import</span> List <span class="token keyword">from</span> <span class="token string">&quot;./Subs/List&quot;</span>

<span class="token keyword">class</span> <span class="token class-name">TodoList</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> el<span class="token operator">:</span> HTMLElement
  <span class="token keyword">private</span> todoData<span class="token operator">:</span> ITodoData<span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">private</span> input<span class="token operator">:</span> Input
  <span class="token keyword">private</span> list<span class="token operator">:</span> List
  <span class="token keyword">private</span> todoWrapper<span class="token operator">:</span> HTMLElement

  <span class="token keyword">constructor</span><span class="token punctuation">(</span>el<span class="token operator">:</span> HTMLElement<span class="token punctuation">,</span> todoData<span class="token operator">:</span> ITodoData<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>el <span class="token operator">=</span> el
    <span class="token keyword">this</span><span class="token punctuation">.</span>todoData <span class="token operator">=</span> todoData
    <span class="token keyword">this</span><span class="token punctuation">.</span>todoWrapper <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createComponents</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bindEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token function">createComponents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Input</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>IInputOptions<span class="token operator">&gt;</span><span class="token punctuation">{</span>
        wrapperEl<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>todoWrapper<span class="token punctuation">,</span>
        placeholderText<span class="token operator">:</span> <span class="token string">'请输入'</span><span class="token punctuation">,</span>
        buttonText<span class="token operator">:</span> <span class="token string">'增加'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">List</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        todoData<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>todoData<span class="token punctuation">,</span>
        wrapperEl<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>todoWrapper<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>todoWrapper<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token function">bindEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;bindEvent&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">.</span><span class="token function">bindEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">bindEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TodoList
</code></pre></div><p>子组件：<code>TodoList/Subs/Input</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> Component <span class="token keyword">from</span> <span class="token string">&quot;./Component&quot;</span>
<span class="token keyword">import</span> List <span class="token keyword">from</span> <span class="token string">&quot;./List&quot;</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">IInputOptions</span> <span class="token punctuation">{</span>
  wrapperEl<span class="token operator">:</span> HTMLElement
  placeholderText<span class="token operator">:</span> <span class="token builtin">string</span>
  buttonText<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Input</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> options<span class="token operator">:</span> IInputOptions

  <span class="token keyword">constructor</span><span class="token punctuation">(</span>options<span class="token operator">:</span> IInputOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> options
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> placeholderText<span class="token punctuation">,</span> buttonText <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options
    <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>wrapperEl<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> Component<span class="token punctuation">.</span><span class="token function">inputView</span><span class="token punctuation">(</span>placeholderText<span class="token punctuation">,</span> buttonText<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token function">bindEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> oAddBtn<span class="token operator">:</span> HTMLElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.add-btn&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> oInput<span class="token operator">:</span> HTMLElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.input&quot;</span><span class="token punctuation">)</span>
    oAddBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> oInput<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token function">handleClick</span><span class="token punctuation">(</span>inputDom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> val<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> inputDom<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      List<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
      inputDom<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Input
</code></pre></div><p>子组件：<code>TodoList/Subs/List</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ITodoData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../../../typings&quot;</span>
<span class="token keyword">import</span> Component <span class="token keyword">from</span> <span class="token string">&quot;./Component&quot;</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">IListOptions</span> <span class="token punctuation">{</span>
  wrapperEl<span class="token operator">:</span> HTMLElement
  todoData<span class="token operator">:</span> ITodoData<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">List</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> wrapperEl<span class="token operator">:</span> HTMLElement
  <span class="token keyword">private</span> <span class="token keyword">static</span> todoData<span class="token operator">:</span> ITodoData<span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span>options<span class="token operator">:</span> IListOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>wrapperEl <span class="token operator">=</span> options<span class="token punctuation">.</span>wrapperEl
    List<span class="token punctuation">.</span>todoData <span class="token operator">=</span> options<span class="token punctuation">.</span>todoData
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>wrapperEl<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> Component<span class="token punctuation">.</span><span class="token function">listView</span><span class="token punctuation">(</span>List<span class="token punctuation">.</span>todoData<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">addItem</span><span class="token punctuation">(</span>val<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> oTodoList<span class="token operator">:</span> HTMLElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.todo-list&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> _item<span class="token operator">:</span> ITodoData <span class="token operator">=</span> <span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      content<span class="token operator">:</span> val<span class="token punctuation">,</span>
      completed<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>

    List<span class="token punctuation">.</span>todoData<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>_item<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>List<span class="token punctuation">.</span>todoData<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      oTodoList<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;&quot;</span>
    <span class="token punctuation">}</span>
    oTodoList<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> Component<span class="token punctuation">.</span><span class="token function">todoView</span><span class="token punctuation">(</span>_item<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token function">bindEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> oTodoList<span class="token operator">:</span> HTMLElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.todo-list&quot;</span><span class="token punctuation">)</span>
    oTodoList<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleListClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token function">handleListClick</span><span class="token punctuation">(</span>e<span class="token operator">:</span> MouseEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> tar <span class="token operator">=</span> e<span class="token punctuation">.</span>target <span class="token keyword">as</span> HTMLElement
    <span class="token keyword">const</span> tagName <span class="token operator">=</span> tar<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> oTodoItems<span class="token operator">:</span> HTMLCollection <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">&quot;todo-item&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>tar<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>id<span class="token punctuation">)</span>

    <span class="token keyword">switch</span> <span class="token punctuation">(</span>tagName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">&quot;input&quot;</span><span class="token operator">:</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_handleCheckBoxClick</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> oTodoItems<span class="token punctuation">)</span>
        <span class="token keyword">break</span>
      <span class="token keyword">case</span> <span class="token string">&quot;button&quot;</span><span class="token operator">:</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_handleButtonClick</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> oTodoItems<span class="token punctuation">)</span>
      <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token keyword">break</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token function">_handleCheckBoxClick</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> oTodoItems<span class="token operator">:</span> HTMLCollection<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    List<span class="token punctuation">.</span>todoData <span class="token operator">=</span> List<span class="token punctuation">.</span>todoData<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>todo<span class="token operator">:</span> ITodoData<span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>todo<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        todo<span class="token punctuation">.</span>completed <span class="token operator">=</span> <span class="token operator">!</span>todo<span class="token punctuation">.</span>completed
        oTodoItems<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;span&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>textDecoration <span class="token operator">=</span> todo<span class="token punctuation">.</span>completed <span class="token operator">?</span> <span class="token string">&quot;line-through&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> todo
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">private</span> <span class="token function">_handleButtonClick</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> oTodoItems<span class="token operator">:</span> HTMLCollection<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    List<span class="token punctuation">.</span>todoData <span class="token operator">=</span> List<span class="token punctuation">.</span>todoData<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>todo<span class="token operator">:</span> ITodoData<span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>todo<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        oTodoItems<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> todo
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>List<span class="token punctuation">.</span>todoData<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.todo-list&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;当前没有数据&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> List
</code></pre></div><p>其他文件：</p> <p><code>Component.ts</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ITodoData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../../../typings&quot;</span>

<span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token function">inputView</span><span class="token punctuation">(</span>placeholderText<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> buttonText<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;div&gt;
            &lt;input type=&quot;text&quot; class='input' placeholder=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>placeholderText<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;/&gt;
            &lt;button class=&quot;add-btn&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>buttonText<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/button&gt;
        &lt;/div&gt;
        </span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>

  <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token function">listView</span><span class="token punctuation">(</span>data<span class="token operator">:</span> ITodoData<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;div class=&quot;todo-list&quot;&gt;
        </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
          data<span class="token punctuation">.</span>length
            <span class="token operator">?</span> data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>todo<span class="token operator">:</span> ITodoData<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> Component<span class="token punctuation">.</span><span class="token function">todoView</span><span class="token punctuation">(</span>todo<span class="token punctuation">)</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token operator">:</span> <span class="token string">&quot;当前没有数据&quot;</span>
        <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
        &lt;/div&gt;
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token function">todoView</span><span class="token punctuation">(</span>todo<span class="token operator">:</span> ITodoData<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> content<span class="token punctuation">,</span> completed <span class="token punctuation">}</span> <span class="token operator">=</span> todo

    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;div class=&quot;todo-item&quot;&gt;
            &lt;input type=&quot;checkbox&quot; data-id=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>completed <span class="token operator">?</span> <span class="token string">&quot;checked&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/&gt;
            &lt;span style=&quot;text-decoration: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>completed <span class="token operator">?</span> <span class="token string">&quot;line-through&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt;
            &lt;button data-id=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;&gt;删除&lt;/button&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Component
</code></pre></div><p><code>typings/index.ts</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ITodoData</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span>
  content<span class="token operator">:</span> <span class="token builtin">string</span>
  completed<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="工厂模式"><a href="#工厂模式" class="header-anchor">#</a> 工厂模式</h2></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2022/4/4 17:08:08</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/design/" class="prev router-link-active">
        概述
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.c7883db4.js" defer></script><script src="/assets/js/2.6de0ece2.js" defer></script><script src="/assets/js/10.4c7ec131.js" defer></script>
  </body>
</html>
